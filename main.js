!function(){"use strict";const e={inputSelector:".js-modal-input",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__save-button_disabled",inputErrorClass:"modal-input-error",errorClass:"modal-error-visible"},t=document.querySelector(".profile"),s=document.querySelector("#card-add"),r=document.querySelector("#image-modal"),i={profile:t,profileEditButton:t.querySelector(".profile__edit-button"),profileAvatar:t.querySelector("#profile-avatar"),profileAvatarButton:t.querySelector("#profile__image-button"),profileTitle:t.querySelector(".profile__title"),updateAvatarForm:document.forms["update-avatar-form"],profileDescription:t.querySelector(".profile__description"),cardListEl:document.querySelector(".cards__list"),cardTemplate:document.querySelector("#card-template"),cardAddButton:t.querySelector("#card-add-button"),profileEdit:document.querySelector("#profile-edit"),profileEditForm:document.forms["profile-edit-form"],profileTitleInput:document.querySelector("#profile-edit-title-input"),profileDescriptionInput:document.querySelector("#profile-edit-description-input"),cardAdd:s,cardAddForm:document.forms["card-add-form"],cardTitleInput:s.querySelector("#card-add-title-input"),cardImageInput:s.querySelector("#card-add-link-input"),imageModal:r,imageModalImage:r.querySelector("#image-modal-image"),imageModalSubText:r.querySelector("#image-modal-sub-text")};class n{constructor(e,t,s,r,i){let{name:n,link:o,_id:a,isLiked:l}=e;this._name=n,this._link=o,this._id=a,this.isLiked=l,this._cardSelector=t,this._handleImageClick=s,this._handleDeleteCardClick=r,this._handleLikeClick=i}getId(){return this._id}_setEventListeners(){this._likeBtnEl.addEventListener("click",(()=>{this._handleLikeClick()})),this._trashBtnEl.addEventListener("click",(()=>{this._handleDeleteCardClick(this)})),this._cardImageEl.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}setIsLiked(e){this.isLiked=e,this._likeBtnEl.classList.toggle("card__button-like_active",e)}initializeCardLike(){this.isLiked&&this._likeBtnEl.classList.add("card__button-like_active")}handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}getView(){return this._cardElement=document.querySelector("#card-template").content.querySelector(".card").cloneNode(!0),this._cardImageEl=this._cardElement.querySelector(".card__image"),this._cardTitleEl=this._cardElement.querySelector(".card__title"),this._trashBtnEl=this._cardElement.querySelector(".card__button-trash"),this._likeBtnEl=this._cardElement.querySelector(".card__button-like"),this._cardImageEl.src=this._link,this._cardImageEl.alt=this._name,this._cardTitleEl.textContent=this._name,this.initializeCardLike(),this._setEventListeners(),this._cardElement}}class o{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent=""}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}disableSubmitButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableSubmitButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?this.disableSubmitButton():this._enableSubmitButton()}_setEventListeners(){this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this._toggleButtonState(this._inputEls)}))}))}resetValidation(){this._inputEls.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class a{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._containerElement=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._containerElement.prepend(e)}}class l{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("click",(e=>{(e.target===e.currentTarget||e.target.classList.contains("modal__close-button"))&&this.close()}))}}class d extends l{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._submitBtn=this._popupForm.querySelector("[type=submit]"),this._handleFormSubmit=t,this._inputs=this._popupForm.querySelectorAll("input")}_getInputValues(){const e={};return this._inputs.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}setInputValues(e){this._inputs.forEach((t=>{t.value=e[t.name]}))}}const c=new d("#card-add",(e=>{const t={name:e.title,link:e.description};c._submitBtn.textContent="Saving...",E.addCard(t).then((e=>{k(e),c.close(),i.cardAddForm.reset(),S.disableSubmitButton()})).catch((e=>{console.error(e),alert(`${e}, Could not add new card`)})).finally((()=>{c._submitBtn.textContent="Save"}))}));c.setEventListeners();const u=new class{constructor(e){let{nameSelector:t,jobSelector:s,avatarSelector:r}=e;this._name=document.querySelector(t),this.about=document.querySelector(s),this._avatar=document.querySelector(r)}getUserInfo(){return{title:this._name.textContent,description:this.about.textContent}}setUserInfo(e){let{name:t,about:s}=e;this._name.textContent=t,this.about.textContent=s}setUserAvatar(e){let{avatar:t}=e;this._avatar.src=t}}({nameSelector:".profile__title",jobSelector:".profile__description",avatarSelector:"#profile-avatar"}),h=new d("#profile-edit",(e=>{h._submitBtn.textContent="Saving...",E.updateProfileInfo(e.title,e.description).then((e=>{h._submitBtn.textContent="Submit",u.setUserInfo(e),h.close()})).catch((e=>{console.error(e),alert(`${e}, Could not load profile info`)}))}));h.setEventListeners();const _=new d("#update-avatar",(e=>{_._submitBtn.textContent="Saving...",E.updateProfilePhoto(e.description).then((e=>{u.setUserAvatar(e),_.close()})).catch((e=>{console.error(e),alert(`${e}, Could not load profile avatar`)})).finally((()=>{_._submitBtn.textContent="Save"}))}));_.setEventListeners();const m=new class extends l{constructor(e){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this.submitButton=this._popupForm.querySelector("[type=submit]")}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit()}))}setSubmitAction(e){this._handleFormSubmit=e}}("#card-delete-conformation");m.setEventListeners();const p=new class extends l{constructor(e){super({popupSelector:e}),this._image=this._popupElement.querySelector("#image-modal-image"),this._text=this._popupElement.querySelector("#image-modal-sub-text")}open(e){this._image.src=e.link,this._text.textContent=e.name,this._image.alt=`Photo of ${e.name}`,super.open()}}("#image-modal");p.setEventListeners();const E=new class{constructor(e){let{baseUrl:t,authToken:s}=e;this._baseUrl=t,this._authToken=s,this._headers={authorization:this._authToken,"Content-Type":"application/json"}}_checkResOk(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._checkResOk)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._checkResOk)}updateProfileInfo(e,t){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then(this._checkResOk)}updateProfilePhoto(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResOk)}addCard(e){let{name:t,link:s}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then(this._checkResOk)}removeCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResOk)}addLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._checkResOk)}removeLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._checkResOk)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",authToken:"e254619e-7195-4851-a257-08f38c23767e"});let f;E.getInitialCards().then((e=>{f=new a({items:e,renderer:k},".cards__list"),f.renderItems()})).catch((e=>{console.error(e),alert(`${e}, Could not load cards`)})),E.getUserInfo().then((e=>{u.setUserInfo(e),u.setUserAvatar(e)})).catch((e=>{console.error(e),alert(`${e}, Could not load user info`)}));const v=new o(e,i.profileEditForm);v.enableValidation();const S=new o(e,i.cardAddForm);function b(e){m.open(),m.setSubmitAction((()=>{m.submitButton.textContent="Saving...",E.removeCard(e.getId()).then((()=>{e.handleDeleteCard(),m.close()})).catch((e=>{console.error(e),alert(`${e}, Could not delete card`)})).finally((()=>{m.submitButton.textContent="Yes"}))}))}function k(e){const t=new n(e,".card-template",C,b,(()=>{t.isLiked?E.removeLike(t._id).then((e=>{t.setIsLiked(e.isLiked)})):E.addLike(t._id).then((e=>{t.setIsLiked(e.isLiked)}))}));f.addItem(t.getView())}function C(e){p.open(e)}S.enableValidation(),new o(e,i.updateAvatarForm).enableValidation(),i.profileEditButton.addEventListener("click",(function(){v.resetValidation(),h.setInputValues(u.getUserInfo()),h.open()})),i.cardAddButton.addEventListener("click",(()=>c.open())),i.profileAvatarButton.addEventListener("click",(()=>{_.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QzlCdkUsRUFDQVcsRUFBVUssa0JBRVFzRixtQkE2RHBCM0YsRUFBVUMsa0JBQWtCd0MsaUJBQWlCLFNBZDdDLFdBQ0UwSixFQUFrQjFHLGtCQUNsQnFFLEVBQStCOUIsZUFBZWtCLEVBQVNNLGVBQ3ZETSxFQUErQmhELE1BQ2pDLElBV0E5RyxFQUFVVSxjQUFjK0IsaUJBQWlCLFNBQVMsSUFDaER3RixFQUFxQm5CLFNBRXZCOUcsRUFBVUcsb0JBQW9Cc0MsaUJBQWlCLFNBQVMsS0FDdER3SCxFQUFpQ25ELE1BQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFpbGRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyAhIHx8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18fFxyXG4vLyAhIHx8ICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdsb2JhbCB2YXJpYWJsZXMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fFxyXG4vLyAhIHx8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18fFxyXG5cclxuZXhwb3J0IGNvbnN0IHNlbGVjdG9ycyA9IHtcclxuICBjYXJkU2VjdGlvbjogXCIuY2FyZHNfX2xpc3RcIixcclxuICBjYXJkVGVtcGxhdGU6IFwiLmNhcmQtdGVtcGxhdGVcIixcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XHJcbiAgaW5wdXRTZWxlY3RvcjogXCIuanMtbW9kYWwtaW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3NhdmUtYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc2F2ZS1idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWwtaW5wdXQtZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsLWVycm9yLXZpc2libGVcIixcclxufTtcclxuXHJcbmNvbnN0IHByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVcIik7XHJcbmNvbnN0IGNhcmRBZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtYWRkXCIpO1xyXG5jb25zdCBpbWFnZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbWFnZS1tb2RhbFwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBjb25zdGFudHMgPSB7XHJcbiAgcHJvZmlsZTogcHJvZmlsZSxcclxuICBwcm9maWxlRWRpdEJ1dHRvbjogcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpLFxyXG4gIHByb2ZpbGVBdmF0YXI6IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWF2YXRhclwiKSxcclxuICBwcm9maWxlQXZhdGFyQnV0dG9uOiBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZV9faW1hZ2UtYnV0dG9uXCIpLFxyXG4gIHByb2ZpbGVUaXRsZTogcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpLFxyXG4gIHVwZGF0ZUF2YXRhckZvcm06IGRvY3VtZW50LmZvcm1zW1widXBkYXRlLWF2YXRhci1mb3JtXCJdLFxyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbjogcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpLFxyXG4gIGNhcmRMaXN0RWw6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIiksXHJcbiAgY2FyZFRlbXBsYXRlOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIiksXHJcbiAgY2FyZEFkZEJ1dHRvbjogcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtYWRkLWJ1dHRvblwiKSxcclxuICBwcm9maWxlRWRpdDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXRcIiksXHJcbiAgcHJvZmlsZUVkaXRGb3JtOiBkb2N1bWVudC5mb3Jtc1tcInByb2ZpbGUtZWRpdC1mb3JtXCJdLFxyXG4gIHByb2ZpbGVUaXRsZUlucHV0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC10aXRsZS1pbnB1dFwiKSxcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgIFwiI3Byb2ZpbGUtZWRpdC1kZXNjcmlwdGlvbi1pbnB1dFwiXHJcbiAgKSxcclxuICBjYXJkQWRkOiBjYXJkQWRkLFxyXG4gIGNhcmRBZGRGb3JtOiBkb2N1bWVudC5mb3Jtc1tcImNhcmQtYWRkLWZvcm1cIl0sXHJcbiAgY2FyZFRpdGxlSW5wdXQ6IGNhcmRBZGQucXVlcnlTZWxlY3RvcihcIiNjYXJkLWFkZC10aXRsZS1pbnB1dFwiKSxcclxuICBjYXJkSW1hZ2VJbnB1dDogY2FyZEFkZC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtYWRkLWxpbmstaW5wdXRcIiksXHJcbiAgaW1hZ2VNb2RhbDogaW1hZ2VNb2RhbCxcclxuICBpbWFnZU1vZGFsSW1hZ2U6IGltYWdlTW9kYWwucXVlcnlTZWxlY3RvcihcIiNpbWFnZS1tb2RhbC1pbWFnZVwiKSxcclxuICBpbWFnZU1vZGFsU3ViVGV4dDogaW1hZ2VNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2ltYWdlLW1vZGFsLXN1Yi10ZXh0XCIpLFxyXG59O1xyXG5cclxuLy8gISB8fC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfHxcclxuLy8gISB8fCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhcmQgRGF0YSBBcnJheSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHxcclxuLy8gISB8fC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfHxcclxuLy8gZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuLy8gICB7XHJcbi8vICAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4vLyAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4vLyAgIH0sXHJcblxyXG4vLyAgIHtcclxuLy8gICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuLy8gICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcclxuLy8gICB9LFxyXG5cclxuLy8gICB7XHJcbi8vICAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbi8vICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbi8vICAgfSxcclxuXHJcbi8vICAge1xyXG4vLyAgICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbi8vICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcclxuLy8gICB9LFxyXG5cclxuLy8gICB7XHJcbi8vICAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4vLyAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXHJcbi8vICAgfSxcclxuXHJcbi8vICAge1xyXG4vLyAgICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4vLyAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbi8vICAgfSxcclxuLy8gXTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICB7IG5hbWUsIGxpbmssIF9pZCwgaXNMaWtlZCB9LFxyXG4gICAgY2FyZFNlbGVjdG9yLFxyXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcclxuICAgIGhhbmRsZURlbGV0ZUNhcmRDbGljayxcclxuICAgIGhhbmRsZUxpa2VDbGlja1xyXG4gICkge1xyXG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gbGluaztcclxuICAgIHRoaXMuX2lkID0gX2lkO1xyXG4gICAgdGhpcy5pc0xpa2VkID0gaXNMaWtlZDtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZENsaWNrID0gaGFuZGxlRGVsZXRlQ2FyZENsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xyXG4gIH1cclxuXHJcbiAgZ2V0SWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faWQ7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9saWtlQnRuRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3RyYXNoQnRuRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZENsaWNrKHRoaXMpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHsgbmFtZTogdGhpcy5fbmFtZSwgbGluazogdGhpcy5fbGluayB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0SXNMaWtlZChsaWtlZCkge1xyXG4gICAgdGhpcy5pc0xpa2VkID0gbGlrZWQ7XHJcbiAgICB0aGlzLl9saWtlQnRuRWwuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2J1dHRvbi1saWtlX2FjdGl2ZVwiLCBsaWtlZCk7XHJcbiAgfVxyXG5cclxuICBpbml0aWFsaXplQ2FyZExpa2UoKSB7XHJcbiAgICBpZiAodGhpcy5pc0xpa2VkKSB7XHJcbiAgICAgIHRoaXMuX2xpa2VCdG5FbC5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fYnV0dG9uLWxpa2VfYWN0aXZlXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlRGVsZXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlldygpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcclxuICAgIHRoaXMuX3RyYXNoQnRuRWwgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2J1dHRvbi10cmFzaFwiKTtcclxuICAgIHRoaXMuX2xpa2VCdG5FbCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uLWxpa2VcIik7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuaW5pdGlhbGl6ZUNhcmRMaWtlKCk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xyXG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZGlzYWJsZVN1Ym1pdEJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIF9lbmFibGVTdWJtaXRCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiAhdGhpcy5faW5wdXRFbHMuZXZlcnkoKGlucHV0RWwpID0+IGlucHV0RWwudmFsaWRpdHkudmFsaWQpO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLl9lbmFibGVTdWJtaXRCdXR0b24oKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0RWxzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuX2lucHV0RWxzKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyRWxlbWVudC5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBjb25zdGFudHMgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgZXZ0LnRhcmdldCA9PT0gZXZ0LmN1cnJlbnRUYXJnZXQgfHxcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZS1idXR0b25cIilcclxuICAgICAgKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5fc3VibWl0QnRuID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXCJbdHlwZT1zdWJtaXRdXCIpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9pbnB1dHMgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcImlucHV0XCIpO1xyXG4gIH1cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBkYXRhID0ge307XHJcblxyXG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGRhdGFbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH1cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcclxuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbi8vIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0IH0pIHtcclxuLy8gICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuLy8gICAvLyBmaXggdGhlIGluaXRpYWwgYnV0dG9uIHRleHQgb25seSBvbmNlIGluIHRoZSBjb25zdHJ1Y3RvclxyXG4vLyAgIHRoaXMuX3N1Ym1pdEJ0blRleHQgPSB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnRcclxuLy8gfVxyXG4vLyAvLyBhZGQgMiBwYXJhbXM6IGlzTG9hZGluZyBhbmQgbG9hZGluZ1RleHQgd2l0aCBhIGRlZmF1bHQgdGV4dFxyXG4vLyByZW5kZXJMb2FkaW5nKGlzTG9hZGluZywgbG9hZGluZ1RleHQ9J1NhdmluZy4uLicpIHtcclxuLy8gICBpZiAoaXNMb2FkaW5nKSB7XHJcbi8vICAgICB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSBsb2FkaW5nVGV4dDtcclxuLy8gICB9IGVsc2Uge1xyXG4vLyAvLyBoZXJlIHdlIHJldHVybiBiYWNrIHRoZSBpbml0aWFsIHRleHQuIFNvLCB5b3UgZG9u4oCZdCBuZWVkIHRvIGJvdGhlciB5b3Vyc2VsZiBhYm91dCBpdFxyXG4vLyAgICAgdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50ID0gdGhpcy5fc3VibWl0QnRuVGV4dDtcclxuLy8gICB9XHJcbi8vIH1cclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IHtcclxuICBzZWxlY3RvcnMsXHJcbiAgY29uc3RhbnRzLFxyXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhaWxkYXRvci5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xyXG5cclxuLy8gISB8fC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfHxcclxuLy8gISB8fCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzIGluc3RhbnRpYXRpb25zICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHxcclxuLy8gISB8fC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfHxcclxuXHJcbmNvbnN0IGNhcmRBZGRQb3B1cFdpdGhGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjY2FyZC1hZGRcIiwgKHZhbHVlcykgPT4ge1xyXG4gIGNvbnN0IG5ld1RpdGxlID0gdmFsdWVzLnRpdGxlO1xyXG4gIGNvbnN0IG5ld0xpbmsgPSB2YWx1ZXMuZGVzY3JpcHRpb247XHJcbiAgY29uc3QgbmV3Q2FyZERhdGEgPSB7XHJcbiAgICBuYW1lOiBuZXdUaXRsZSxcclxuICAgIGxpbms6IG5ld0xpbmssXHJcbiAgfTtcclxuICBjYXJkQWRkUG9wdXBXaXRoRm9ybS5fc3VibWl0QnRuLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuICBhcGlcclxuICAgIC5hZGRDYXJkKG5ld0NhcmREYXRhKVxyXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgcmVuZGVyQ2FyZChkYXRhKTtcclxuICAgICAgY2FyZEFkZFBvcHVwV2l0aEZvcm0uY2xvc2UoKTtcclxuICAgICAgY29uc3RhbnRzLmNhcmRBZGRGb3JtLnJlc2V0KCk7XHJcbiAgICAgIGFkZEZvcm1WYWlsZGF0b3IuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgYWxlcnQoYCR7ZXJyfSwgQ291bGQgbm90IGFkZCBuZXcgY2FyZGApO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgY2FyZEFkZFBvcHVwV2l0aEZvcm0uX3N1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuY2FyZEFkZFBvcHVwV2l0aEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBuYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3RpdGxlXCIsXHJcbiAgam9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXHJcbiAgYXZhdGFyU2VsZWN0b3I6IFwiI3Byb2ZpbGUtYXZhdGFyXCIsXHJcbn0pO1xyXG5cclxuY29uc3QgcHJvZmlsZUVkaXRTdWJtaXRQb3B1cFdpdGhGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIjcHJvZmlsZS1lZGl0XCIsXHJcbiAgKHZhbHVlcykgPT4ge1xyXG4gICAgcHJvZmlsZUVkaXRTdWJtaXRQb3B1cFdpdGhGb3JtLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xyXG4gICAgYXBpXHJcbiAgICAgIC51cGRhdGVQcm9maWxlSW5mbyh2YWx1ZXMudGl0bGUsIHZhbHVlcy5kZXNjcmlwdGlvbilcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIHByb2ZpbGVFZGl0U3VibWl0UG9wdXBXaXRoRm9ybS5fc3VibWl0QnRuLnRleHRDb250ZW50ID0gXCJTdWJtaXRcIjtcclxuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXMpO1xyXG4gICAgICAgIHByb2ZpbGVFZGl0U3VibWl0UG9wdXBXaXRoRm9ybS5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICBhbGVydChgJHtlcnJ9LCBDb3VsZCBub3QgbG9hZCBwcm9maWxlIGluZm9gKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG4pO1xyXG5cclxucHJvZmlsZUVkaXRTdWJtaXRQb3B1cFdpdGhGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCB1cGRhdGVQcm9maWxlQXZhdGFyUG9wdXBXaXRoRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI3VwZGF0ZS1hdmF0YXJcIixcclxuICAodmFsdWUpID0+IHtcclxuICAgIHVwZGF0ZVByb2ZpbGVBdmF0YXJQb3B1cFdpdGhGb3JtLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xyXG4gICAgYXBpXHJcbiAgICAgIC51cGRhdGVQcm9maWxlUGhvdG8odmFsdWUuZGVzY3JpcHRpb24pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHJlcyk7XHJcbiAgICAgICAgdXBkYXRlUHJvZmlsZUF2YXRhclBvcHVwV2l0aEZvcm0uY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgYWxlcnQoYCR7ZXJyfSwgQ291bGQgbm90IGxvYWQgcHJvZmlsZSBhdmF0YXJgKTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIHVwZGF0ZVByb2ZpbGVBdmF0YXJQb3B1cFdpdGhGb3JtLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcclxuICAgICAgfSk7XHJcbiAgfVxyXG4pO1xyXG5cclxudXBkYXRlUHJvZmlsZUF2YXRhclBvcHVwV2l0aEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGRlbGV0ZUNhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oXCIjY2FyZC1kZWxldGUtY29uZm9ybWF0aW9uXCIpO1xyXG5kZWxldGVDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjaW1hZ2UtbW9kYWxcIik7XHJcblxyXG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXHJcbiAgYXV0aFRva2VuOiBcImUyNTQ2MTllLTcxOTUtNDg1MS1hMjU3LTA4ZjM4YzIzNzY3ZVwiLFxyXG59KTtcclxuXHJcbmxldCBjYXJkU2VjdGlvbjtcclxuXHJcbmFwaVxyXG4gIC5nZXRJbml0aWFsQ2FyZHMoKVxyXG4gIC50aGVuKChjYXJkcykgPT4ge1xyXG4gICAgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICAgICAge1xyXG4gICAgICAgIGl0ZW1zOiBjYXJkcyxcclxuICAgICAgICByZW5kZXJlcjogcmVuZGVyQ2FyZCxcclxuICAgICAgfSxcclxuICAgICAgc2VsZWN0b3JzLmNhcmRTZWN0aW9uXHJcbiAgICApO1xyXG4gICAgY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICBhbGVydChgJHtlcnJ9LCBDb3VsZCBub3QgbG9hZCBjYXJkc2ApO1xyXG4gIH0pO1xyXG5cclxuYXBpXHJcbiAgLmdldFVzZXJJbmZvKClcclxuICAudGhlbigodXNlckRhdGEpID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJEYXRhKTtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIodXNlckRhdGEpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgIGFsZXJ0KGAke2Vycn0sIENvdWxkIG5vdCBsb2FkIHVzZXIgaW5mb2ApO1xyXG4gIH0pO1xyXG5cclxuLy8gISB8fC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfHxcclxuLy8gISB8fCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmFsaWRhdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHxcclxuLy8gISB8fC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfHxcclxuXHJcbmNvbnN0IGVkaXRGb3JtVmFpbGRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxyXG4gIGNvbnN0YW50cy5wcm9maWxlRWRpdEZvcm1cclxuKTtcclxuZWRpdEZvcm1WYWlsZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5jb25zdCBhZGRGb3JtVmFpbGRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxyXG4gIGNvbnN0YW50cy5jYXJkQWRkRm9ybVxyXG4pO1xyXG5hZGRGb3JtVmFpbGRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXHJcbiAgY29uc3RhbnRzLnVwZGF0ZUF2YXRhckZvcm1cclxuKTtcclxuYXZhdGFyRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vLyAhIHx8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18fFxyXG4vLyAhIHx8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGdW5jdGlvbnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fFxyXG4vLyAhIHx8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18fFxyXG5cclxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQ2FyZENsaWNrKGNhcmQpIHtcclxuICBkZWxldGVDYXJkUG9wdXAub3BlbigpO1xyXG4gIGRlbGV0ZUNhcmRQb3B1cC5zZXRTdWJtaXRBY3Rpb24oKCkgPT4ge1xyXG4gICAgZGVsZXRlQ2FyZFBvcHVwLnN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XHJcbiAgICBhcGlcclxuICAgICAgLnJlbW92ZUNhcmQoY2FyZC5nZXRJZCgpKVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgY2FyZC5oYW5kbGVEZWxldGVDYXJkKCk7XHJcbiAgICAgICAgZGVsZXRlQ2FyZFBvcHVwLmNsb3NlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgIGFsZXJ0KGAke2Vycn0sIENvdWxkIG5vdCBkZWxldGUgY2FyZGApO1xyXG4gICAgICB9KVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgZGVsZXRlQ2FyZFBvcHVwLnN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiWWVzXCI7XHJcbiAgICAgIH0pO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJDYXJkKGl0ZW0pIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICBpdGVtLFxyXG4gICAgc2VsZWN0b3JzLmNhcmRUZW1wbGF0ZSxcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBoYW5kbGVEZWxldGVDYXJkQ2xpY2ssXHJcbiAgICAoKSA9PiB7XHJcbiAgICAgIGlmICghY2FyZC5pc0xpa2VkKSB7XHJcbiAgICAgICAgYXBpLmFkZExpa2UoY2FyZC5faWQpLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgY2FyZC5zZXRJc0xpa2VkKHJlcy5pc0xpa2VkKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhcGkucmVtb3ZlTGlrZShjYXJkLl9pZCkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICBjYXJkLnNldElzTGlrZWQocmVzLmlzTGlrZWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgKTtcclxuICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmQuZ2V0VmlldygpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb3BlblByb2ZpbGVGb3JtKCkge1xyXG4gIGVkaXRGb3JtVmFpbGRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIHByb2ZpbGVFZGl0U3VibWl0UG9wdXBXaXRoRm9ybS5zZXRJbnB1dFZhbHVlcyh1c2VySW5mby5nZXRVc2VySW5mbygpKTtcclxuICBwcm9maWxlRWRpdFN1Ym1pdFBvcHVwV2l0aEZvcm0ub3BlbigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKGNhcmREYXRhKSB7XHJcbiAgaW1hZ2VQb3B1cC5vcGVuKGNhcmREYXRhKTtcclxufVxyXG5cclxuLy8gISB8fC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfHxcclxuLy8gISB8fCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50IExpc3RlbmVycyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHxcclxuLy8gISB8fC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfHxcclxuXHJcbmNvbnN0YW50cy5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlblByb2ZpbGVGb3JtKTtcclxuY29uc3RhbnRzLmNhcmRBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgY2FyZEFkZFBvcHVwV2l0aEZvcm0ub3BlbigpXHJcbik7XHJcbmNvbnN0YW50cy5wcm9maWxlQXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgdXBkYXRlUHJvZmlsZUF2YXRhclBvcHVwV2l0aEZvcm0ub3BlbigpO1xyXG59KTtcclxuLy8gISB8fC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfHxcclxuLy8gISB8fCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJhbmRvbSBNb3VudGFpbiBMaW5rcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHxcclxuLy8gISB8fC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfHxcclxuXHJcbi8vIFRvcnJlbnQgTW91bnRhaW5zIGxpbms6IGh0dHBzOi8vY2RuLnBpeGFiYXkuY29tL3Bob3RvLzIwMjMvMTIvMDYvMDgvNDEvbW91bnRhaW4tODQzMzIzNF8xMjgwLmpwZ1xyXG4vLyBIdW50ZXIgUGVhayBsaW5rOiBodHRwczovL2Nkbi5waXhhYmF5LmNvbS9waG90by8yMDI0LzAyLzEyLzE2LzA1L2h1bnRlci1wZWFrLTg1Njg5MTVfMTI4MC5qcGdcclxuLy8gS2V5c3ZpbGxlIGxpbms6IGh0dHBzOi8vY2RuLnBpeGFiYXkuY29tL3Bob3RvLzIwMjMvMDgvMjIvMjEvMTgvbW91bnRhaW4tODIwNzIxMl8xMjgwLmpwZ1xyXG4vLyBGb3ggQmFja2NvdW50cnkgbGluazogaHR0cHM6Ly93d3cucmlkZWZveC5jb20vaW1nL3N1YmhvbWUvc25vdy9iYWNrY291bnRyeS1sb2dvLWxpZ2h0LnBuZ1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yLCBhdmF0YXJTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5hYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICAvLyB1c2UgdG8gZ2V0IHByb2ZpbGUgZGF0YSBmb3IgaW5zZXJ0aW5nIGludG8gZm9ybSB3aGVuIGl0IGlzIG9wZW5lZFxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgY29uc3QgZGF0YSA9IHtcclxuICAgICAgdGl0bGU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmFib3V0LnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH1cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcclxuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5hYm91dC50ZXh0Q29udGVudCA9IGFib3V0O1xyXG4gIH1cclxuICBzZXRVc2VyQXZhdGFyKHsgYXZhdGFyIH0pIHtcclxuICAgIHRoaXMuX2F2YXRhci5zcmMgPSBhdmF0YXI7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvcihcIlt0eXBlPXN1Ym1pdF1cIik7XHJcbiAgfVxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0U3VibWl0QWN0aW9uKGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2UtbW9kYWwtaW1hZ2VcIik7XHJcbiAgICB0aGlzLl90ZXh0ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2UtbW9kYWwtc3ViLXRleHRcIik7XHJcbiAgfVxyXG4gIG9wZW4oZGF0YSkge1xyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fdGV4dC50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2ltYWdlLmFsdCA9IGBQaG90byBvZiAke2RhdGEubmFtZX1gO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgYXV0aFRva2VuIH0pIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgdGhpcy5fYXV0aFRva2VuID0gYXV0aFRva2VuO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IHtcclxuICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aFRva2VuLFxyXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBfY2hlY2tSZXNPayhyZXMpIHtcclxuICAgIHJldHVybiByZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzT2spO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzT2spO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlUHJvZmlsZUluZm8obmFtZSwgYWJvdXQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgYWJvdXQgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzT2spO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlUHJvZmlsZVBob3RvKGF2YXRhcikge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYXZhdGFyIH0pLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc09rKTtcclxuICB9XHJcblxyXG4gIGFkZENhcmQoeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lLCBsaW5rIH0pLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc09rKTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUNhcmQoY2FyZElEKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSUR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzT2spO1xyXG4gIH1cclxuXHJcbiAgYWRkTGlrZShjYXJkSUQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJRH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNPayk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVMaWtlKGNhcmRJRCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElEfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc09rKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbInZhbGlkYXRpb25TZXR0aW5ncyIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwicHJvZmlsZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNhcmRBZGQiLCJpbWFnZU1vZGFsIiwiY29uc3RhbnRzIiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlQXZhdGFyIiwicHJvZmlsZUF2YXRhckJ1dHRvbiIsInByb2ZpbGVUaXRsZSIsInVwZGF0ZUF2YXRhckZvcm0iLCJmb3JtcyIsInByb2ZpbGVEZXNjcmlwdGlvbiIsImNhcmRMaXN0RWwiLCJjYXJkVGVtcGxhdGUiLCJjYXJkQWRkQnV0dG9uIiwicHJvZmlsZUVkaXQiLCJwcm9maWxlRWRpdEZvcm0iLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwiY2FyZEFkZEZvcm0iLCJjYXJkVGl0bGVJbnB1dCIsImNhcmRJbWFnZUlucHV0IiwiaW1hZ2VNb2RhbEltYWdlIiwiaW1hZ2VNb2RhbFN1YlRleHQiLCJDYXJkIiwiY29uc3RydWN0b3IiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsImhhbmRsZURlbGV0ZUNhcmRDbGljayIsImhhbmRsZUxpa2VDbGljayIsIm5hbWUiLCJsaW5rIiwiX2lkIiwiaXNMaWtlZCIsInRoaXMiLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUNhcmRDbGljayIsIl9oYW5kbGVMaWtlQ2xpY2siLCJnZXRJZCIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9saWtlQnRuRWwiLCJhZGRFdmVudExpc3RlbmVyIiwiX3RyYXNoQnRuRWwiLCJfY2FyZEltYWdlRWwiLCJzZXRJc0xpa2VkIiwibGlrZWQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJpbml0aWFsaXplQ2FyZExpa2UiLCJhZGQiLCJoYW5kbGVEZWxldGVDYXJkIiwiX2NhcmRFbGVtZW50IiwicmVtb3ZlIiwiZ2V0VmlldyIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfY2FyZFRpdGxlRWwiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9mb3JtIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbCIsImVycm9yTWVzc2FnZUVsIiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiZGlzYWJsZVN1Ym1pdEJ1dHRvbiIsIl9zdWJtaXRCdXR0b24iLCJkaXNhYmxlZCIsIl9lbmFibGVTdWJtaXRCdXR0b24iLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0RWxzIiwiZXZlcnkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImV2dCIsInJlc2V0VmFsaWRhdGlvbiIsImlucHV0IiwiZW5hYmxlVmFsaWRhdGlvbiIsInByZXZlbnREZWZhdWx0IiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXJFbGVtZW50IiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9zdWJtaXRCdG4iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9pbnB1dHMiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJkYXRhIiwidmFsdWUiLCJzZXRJbnB1dFZhbHVlcyIsImNhcmRBZGRQb3B1cFdpdGhGb3JtIiwidmFsdWVzIiwibmV3Q2FyZERhdGEiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiYXBpIiwiYWRkQ2FyZCIsInRoZW4iLCJyZW5kZXJDYXJkIiwicmVzZXQiLCJhZGRGb3JtVmFpbGRhdG9yIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJhbGVydCIsImZpbmFsbHkiLCJ1c2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJhYm91dCIsIl9hdmF0YXIiLCJnZXRVc2VySW5mbyIsInNldFVzZXJJbmZvIiwiX3JlZjIiLCJzZXRVc2VyQXZhdGFyIiwiX3JlZjMiLCJhdmF0YXIiLCJwcm9maWxlRWRpdFN1Ym1pdFBvcHVwV2l0aEZvcm0iLCJ1cGRhdGVQcm9maWxlSW5mbyIsInJlcyIsInVwZGF0ZVByb2ZpbGVBdmF0YXJQb3B1cFdpdGhGb3JtIiwidXBkYXRlUHJvZmlsZVBob3RvIiwiZGVsZXRlQ2FyZFBvcHVwIiwic3VibWl0QnV0dG9uIiwic2V0U3VibWl0QWN0aW9uIiwiaW1hZ2VQb3B1cCIsIl9pbWFnZSIsIl90ZXh0IiwiYmFzZVVybCIsImF1dGhUb2tlbiIsIl9iYXNlVXJsIiwiX2F1dGhUb2tlbiIsIl9oZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsIl9jaGVja1Jlc09rIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwiaGVhZGVycyIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwicmVtb3ZlQ2FyZCIsImNhcmRJRCIsImFkZExpa2UiLCJyZW1vdmVMaWtlIiwiY2FyZFNlY3Rpb24iLCJjYXJkcyIsInVzZXJEYXRhIiwiZWRpdEZvcm1WYWlsZGF0b3IiLCJjYXJkIiwiY2FyZERhdGEiXSwic291cmNlUm9vdCI6IiJ9