!function(){"use strict";const e={inputSelector:".js-modal-input",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__save-button_disabled",inputErrorClass:"modal-input-error",errorClass:"modal-error-visible"},t=document.querySelector(".profile"),s=document.querySelector("#card-add"),r=document.querySelector("#image-modal"),i={profile:t,profileEditButton:t.querySelector(".profile__edit-button"),profileAvatar:t.querySelector("#profile-avatar"),profileAvatarButton:t.querySelector("#profile__image-button"),profileTitle:t.querySelector(".profile__title"),updateAvatarForm:document.forms["update-avatar-form"],profileDescription:t.querySelector(".profile__description"),cardListEl:document.querySelector(".cards__list"),cardTemplate:document.querySelector("#card-template"),cardAddButton:t.querySelector("#card-add-button"),profileEdit:document.querySelector("#profile-edit"),profileEditForm:document.forms["profile-edit-form"],profileTitleInput:document.querySelector("#profile-edit-title-input"),profileDescriptionInput:document.querySelector("#profile-edit-description-input"),cardAdd:s,cardAddForm:document.forms["card-add-form"],cardTitleInput:s.querySelector("#card-add-title-input"),cardImageInput:s.querySelector("#card-add-link-input"),imageModal:r,imageModalImage:r.querySelector("#image-modal-image"),imageModalSubText:r.querySelector("#image-modal-sub-text")};class n{constructor(e,t,s,r,i){let{name:n,link:o,_id:a,isLiked:l}=e;this._name=n,this._link=o,this._id=a,this.isLiked=l,this._cardSelector=t,this._handleImageClick=s,this._handleDeleteCardClick=r,this._handleLikeClick=i}getId(){return this._id}_setEventListeners(){this._likeBtnEl.addEventListener("click",(()=>{this._handleLikeClick()})),this._trashBtnEl.addEventListener("click",(()=>{this._handleDeleteCardClick(this)})),this._cardImageEl.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}setIsLiked(e){this.isLiked=e,this._likeBtnEl.classList.toggle("card__button-like_active",e)}initializeCardLike(){this.isLiked&&this._likeBtnEl.classList.add("card__button-like_active")}handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}getView(){return this._cardElement=document.querySelector("#card-template").content.querySelector(".card").cloneNode(!0),this._cardImageEl=this._cardElement.querySelector(".card__image"),this._cardTitleEl=this._cardElement.querySelector(".card__title"),this._trashBtnEl=this._cardElement.querySelector(".card__button-trash"),this._likeBtnEl=this._cardElement.querySelector(".card__button-like"),this._cardImageEl.src=this._link,this._cardImageEl.alt=this._name,this._cardTitleEl.textContent=this._name,this.initializeCardLike(),this._setEventListeners(),this._cardElement}}class o{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent=""}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}disableSubmitButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableSubmitButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?this.disableSubmitButton():this._enableSubmitButton()}_setEventListeners(){this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this._toggleButtonState(this._inputEls)}))}))}resetValidation(){this._inputEls.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class a{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._containerElement=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._containerElement.prepend(e)}}class l{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("click",(e=>{(e.target===e.currentTarget||e.target.classList.contains("modal__close-button"))&&this.close()}))}}class c extends l{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this.submitBtn=this._popupForm.querySelector("[type=submit]"),this._handleFormSubmit=t,this._inputs=this._popupForm.querySelectorAll("input")}_getInputValues(){const e={};return this._inputs.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}setInputValues(e){this._inputs.forEach((t=>{t.value=e[t.name]}))}}const d=new c("#card-add",(e=>{const t={name:e.title,link:e.description};d.submitBtn.textContent="Saving...",E.addCard(t).then((e=>{k(e),d.close(),i.cardAddForm.reset(),S.disableSubmitButton()})).catch((e=>{console.error(e)})).finally((()=>{d.submitBtn.textContent="Save"}))}));d.setEventListeners();const u=new class{constructor(e){let{nameSelector:t,jobSelector:s,avatarSelector:r}=e;this._name=document.querySelector(t),this.about=document.querySelector(s),this._avatar=document.querySelector(r)}getUserInfo(){return{title:this._name.textContent,description:this.about.textContent}}setUserInfo(e){let{name:t,about:s}=e;this._name.textContent=t,this.about.textContent=s}setUserAvatar(e){let{avatar:t}=e;this._avatar.src=t}}({nameSelector:".profile__title",jobSelector:".profile__description",avatarSelector:"#profile-avatar"}),h=new c("#profile-edit",(e=>{h.submitBtn.textContent="Saving...",E.updateProfileInfo(e.title,e.description).then((e=>{u.setUserInfo(e),h.close()})).catch((e=>{console.error(e)})).finally((()=>{h.submitBtn.textContent="Save"}))}));h.setEventListeners();const _=new c("#update-avatar",(e=>{_.submitBtn.textContent="Saving...",E.updateProfilePhoto(e.description).then((e=>{u.setUserAvatar(e),_.close()})).catch((e=>{console.error(e)})).finally((()=>{_.submitBtn.textContent="Save"}))}));_.setEventListeners();const m=new class extends l{constructor(e){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this.submitButton=this._popupForm.querySelector("[type=submit]")}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit()}))}setSubmitAction(e){this._handleFormSubmit=e}}("#card-delete-conformation");m.setEventListeners();const p=new class extends l{constructor(e){super({popupSelector:e}),this._image=this._popupElement.querySelector("#image-modal-image"),this._text=this._popupElement.querySelector("#image-modal-sub-text")}open(e){this._image.src=e.link,this._text.textContent=e.name,this._image.alt=`Photo of ${e.name}`,super.open()}}("#image-modal");p.setEventListeners();const E=new class{constructor(e){let{baseUrl:t,authToken:s}=e;this._baseUrl=t,this._authToken=s,this._headers={authorization:this._authToken,"Content-Type":"application/json"}}_checkResOk(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._checkResOk)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._checkResOk)}updateProfileInfo(e,t){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then(this._checkResOk)}updateProfilePhoto(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResOk)}addCard(e){let{name:t,link:s}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then(this._checkResOk)}removeCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResOk)}addLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._checkResOk)}removeLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._checkResOk)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",authToken:"e254619e-7195-4851-a257-08f38c23767e"});let v;E.getInitialCards().then((e=>{v=new a({items:e,renderer:k},".cards__list"),v.renderItems()})).catch((e=>{console.error(e)})),E.getUserInfo().then((e=>{u.setUserInfo(e),u.setUserAvatar(e)})).catch((e=>{console.error(e)}));const f=new o(e,i.profileEditForm);f.enableValidation();const S=new o(e,i.cardAddForm);function b(e){m.open(),m.setSubmitAction((()=>{m.submitButton.textContent="Saving...",E.removeCard(e.getId()).then((()=>{e.handleDeleteCard(),m.close()})).catch((e=>{console.error(e)})).finally((()=>{m.submitButton.textContent="Yes"}))}))}function k(e){const t=new n(e,".card-template",y,b,(()=>{t.isLiked?E.removeLike(t._id).then((e=>{t.setIsLiked(e.isLiked)})).catch((e=>{console.error(e)})):E.addLike(t._id).then((e=>{t.setIsLiked(e.isLiked)})).catch((e=>{console.error(e)}))}));v.addItem(t.getView())}function y(e){p.open(e)}S.enableValidation(),new o(e,i.updateAvatarForm).enableValidation(),i.profileEditButton.addEventListener("click",(function(){f.resetValidation(),h.setInputValues(u.getUserInfo()),h.open()})),i.cardAddButton.addEventListener("click",(()=>d.open())),i.profileAvatarButton.addEventListener("click",(()=>{_.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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c0VwQjNGLEVBQVVDLGtCQUFrQndDLGlCQUFpQixTQWQ3QyxXQUNFeUosRUFBa0J6RyxrQkFDbEJvRSxFQUErQjdCLGVBQWVpQixFQUFTTSxlQUN2RE0sRUFBK0IvQyxNQUNqQyxJQVdBOUcsRUFBVVUsY0FBYytCLGlCQUFpQixTQUFTLElBQ2hEd0YsRUFBcUJuQixTQUV2QjlHLEVBQVVHLG9CQUFvQnNDLGlCQUFpQixTQUFTLEtBQ3REdUgsRUFBaUNsRCxNQUFNLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhaWxkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gISB8fC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfHxcclxuLy8gISB8fCAgICAgICAgICAgICAgICAgICAgICAgICAgICBHbG9iYWwgdmFyaWFibGVzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHxcclxuLy8gISB8fC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfHxcclxuXHJcbmV4cG9ydCBjb25zdCBzZWxlY3RvcnMgPSB7XHJcbiAgY2FyZFNlY3Rpb246IFwiLmNhcmRzX19saXN0XCIsXHJcbiAgY2FyZFRlbXBsYXRlOiBcIi5jYXJkLXRlbXBsYXRlXCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6IFwiLmpzLW1vZGFsLWlucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zYXZlLWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3NhdmUtYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsLWlucHV0LWVycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbC1lcnJvci12aXNpYmxlXCIsXHJcbn07XHJcblxyXG5jb25zdCBwcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlXCIpO1xyXG5jb25zdCBjYXJkQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLWFkZFwiKTtcclxuY29uc3QgaW1hZ2VNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2UtbW9kYWxcIik7XHJcblxyXG5leHBvcnQgY29uc3QgY29uc3RhbnRzID0ge1xyXG4gIHByb2ZpbGU6IHByb2ZpbGUsXHJcbiAgcHJvZmlsZUVkaXRCdXR0b246IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKSxcclxuICBwcm9maWxlQXZhdGFyOiBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1hdmF0YXJcIiksXHJcbiAgcHJvZmlsZUF2YXRhckJ1dHRvbjogcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVfX2ltYWdlLWJ1dHRvblwiKSxcclxuICBwcm9maWxlVGl0bGU6IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKSxcclxuICB1cGRhdGVBdmF0YXJGb3JtOiBkb2N1bWVudC5mb3Jtc1tcInVwZGF0ZS1hdmF0YXItZm9ybVwiXSxcclxuICBwcm9maWxlRGVzY3JpcHRpb246IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKSxcclxuICBjYXJkTGlzdEVsOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpLFxyXG4gIGNhcmRUZW1wbGF0ZTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpLFxyXG4gIGNhcmRBZGRCdXR0b246IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcIiNjYXJkLWFkZC1idXR0b25cIiksXHJcbiAgcHJvZmlsZUVkaXQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0XCIpLFxyXG4gIHByb2ZpbGVFZGl0Rm9ybTogZG9jdW1lbnQuZm9ybXNbXCJwcm9maWxlLWVkaXQtZm9ybVwiXSxcclxuICBwcm9maWxlVGl0bGVJbnB1dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtdGl0bGUtaW5wdXRcIiksXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICBcIiNwcm9maWxlLWVkaXQtZGVzY3JpcHRpb24taW5wdXRcIlxyXG4gICksXHJcbiAgY2FyZEFkZDogY2FyZEFkZCxcclxuICBjYXJkQWRkRm9ybTogZG9jdW1lbnQuZm9ybXNbXCJjYXJkLWFkZC1mb3JtXCJdLFxyXG4gIGNhcmRUaXRsZUlucHV0OiBjYXJkQWRkLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1hZGQtdGl0bGUtaW5wdXRcIiksXHJcbiAgY2FyZEltYWdlSW5wdXQ6IGNhcmRBZGQucXVlcnlTZWxlY3RvcihcIiNjYXJkLWFkZC1saW5rLWlucHV0XCIpLFxyXG4gIGltYWdlTW9kYWw6IGltYWdlTW9kYWwsXHJcbiAgaW1hZ2VNb2RhbEltYWdlOiBpbWFnZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2UtbW9kYWwtaW1hZ2VcIiksXHJcbiAgaW1hZ2VNb2RhbFN1YlRleHQ6IGltYWdlTW9kYWwucXVlcnlTZWxlY3RvcihcIiNpbWFnZS1tb2RhbC1zdWItdGV4dFwiKSxcclxufTtcclxuXHJcbi8vICEgfHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXx8XHJcbi8vICEgfHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYXJkIERhdGEgQXJyYXkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8XHJcbi8vICEgfHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXx8XHJcbi8vIGV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbi8vICAge1xyXG4vLyAgICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuLy8gICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuLy8gICB9LFxyXG5cclxuLy8gICB7XHJcbi8vICAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbi8vICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbi8vICAgfSxcclxuXHJcbi8vICAge1xyXG4vLyAgICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4vLyAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4vLyAgIH0sXHJcblxyXG4vLyAgIHtcclxuLy8gICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4vLyAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbi8vICAgfSxcclxuXHJcbi8vICAge1xyXG4vLyAgICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuLy8gICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4vLyAgIH0sXHJcblxyXG4vLyAgIHtcclxuLy8gICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuLy8gICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4vLyAgIH0sXHJcbi8vIF07XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgeyBuYW1lLCBsaW5rLCBfaWQsIGlzTGlrZWQgfSxcclxuICAgIGNhcmRTZWxlY3RvcixcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBoYW5kbGVEZWxldGVDYXJkQ2xpY2ssXHJcbiAgICBoYW5kbGVMaWtlQ2xpY2tcclxuICApIHtcclxuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGxpbms7XHJcbiAgICB0aGlzLl9pZCA9IF9pZDtcclxuICAgIHRoaXMuaXNMaWtlZCA9IGlzTGlrZWQ7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmRDbGljayA9IGhhbmRsZURlbGV0ZUNhcmRDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcclxuICB9XHJcblxyXG4gIGdldElkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lkO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ0bkVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljaygpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl90cmFzaEJ0bkVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmRDbGljayh0aGlzKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh7IG5hbWU6IHRoaXMuX25hbWUsIGxpbms6IHRoaXMuX2xpbmsgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldElzTGlrZWQobGlrZWQpIHtcclxuICAgIHRoaXMuaXNMaWtlZCA9IGxpa2VkO1xyXG4gICAgdGhpcy5fbGlrZUJ0bkVsLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19idXR0b24tbGlrZV9hY3RpdmVcIiwgbGlrZWQpO1xyXG4gIH1cclxuXHJcbiAgaW5pdGlhbGl6ZUNhcmRMaWtlKCkge1xyXG4gICAgaWYgKHRoaXMuaXNMaWtlZCkge1xyXG4gICAgICB0aGlzLl9saWtlQnRuRWwuY2xhc3NMaXN0LmFkZChcImNhcmRfX2J1dHRvbi1saWtlX2FjdGl2ZVwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGhhbmRsZURlbGV0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGVFbCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcbiAgICB0aGlzLl90cmFzaEJ0bkVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19idXR0b24tdHJhc2hcIik7XHJcbiAgICB0aGlzLl9saWtlQnRuRWwgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2J1dHRvbi1saWtlXCIpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGVFbC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLmluaXRpYWxpemVDYXJkTGlrZSgpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpIHtcclxuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGRpc2FibGVTdWJtaXRCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBfZW5hYmxlU3VibWl0QnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxzLmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fZW5hYmxlU3VibWl0QnV0dG9uKCk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVscyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9pbnB1dEVscyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lckVsZW1lbnQucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgY29uc3RhbnRzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIGV2dC50YXJnZXQgPT09IGV2dC5jdXJyZW50VGFyZ2V0IHx8XHJcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2UtYnV0dG9uXCIpXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuc3VibWl0QnRuID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXCJbdHlwZT1zdWJtaXRdXCIpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9pbnB1dHMgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcImlucHV0XCIpO1xyXG4gIH1cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBkYXRhID0ge307XHJcblxyXG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGRhdGFbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH1cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcclxuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IHtcclxuICBzZWxlY3RvcnMsXHJcbiAgY29uc3RhbnRzLFxyXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhaWxkYXRvci5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xyXG5cclxuLy8gISB8fC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfHxcclxuLy8gISB8fCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzIGluc3RhbnRpYXRpb25zICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHxcclxuLy8gISB8fC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfHxcclxuXHJcbmNvbnN0IGNhcmRBZGRQb3B1cFdpdGhGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjY2FyZC1hZGRcIiwgKHZhbHVlcykgPT4ge1xyXG4gIGNvbnN0IG5ld1RpdGxlID0gdmFsdWVzLnRpdGxlO1xyXG4gIGNvbnN0IG5ld0xpbmsgPSB2YWx1ZXMuZGVzY3JpcHRpb247XHJcbiAgY29uc3QgbmV3Q2FyZERhdGEgPSB7XHJcbiAgICBuYW1lOiBuZXdUaXRsZSxcclxuICAgIGxpbms6IG5ld0xpbmssXHJcbiAgfTtcclxuICBjYXJkQWRkUG9wdXBXaXRoRm9ybS5zdWJtaXRCdG4udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xyXG4gIGFwaVxyXG4gICAgLmFkZENhcmQobmV3Q2FyZERhdGEpXHJcbiAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICByZW5kZXJDYXJkKGRhdGEpO1xyXG4gICAgICBjYXJkQWRkUG9wdXBXaXRoRm9ybS5jbG9zZSgpO1xyXG4gICAgICBjb25zdGFudHMuY2FyZEFkZEZvcm0ucmVzZXQoKTtcclxuICAgICAgYWRkRm9ybVZhaWxkYXRvci5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgY2FyZEFkZFBvcHVwV2l0aEZvcm0uc3VibWl0QnRuLnRleHRDb250ZW50ID0gXCJTYXZlXCI7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5jYXJkQWRkUG9wdXBXaXRoRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcclxuICBqb2JTZWxlY3RvcjogXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIixcclxuICBhdmF0YXJTZWxlY3RvcjogXCIjcHJvZmlsZS1hdmF0YXJcIixcclxufSk7XHJcblxyXG5jb25zdCBwcm9maWxlRWRpdFN1Ym1pdFBvcHVwV2l0aEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNwcm9maWxlLWVkaXRcIixcclxuICAodmFsdWVzKSA9PiB7XHJcbiAgICBwcm9maWxlRWRpdFN1Ym1pdFBvcHVwV2l0aEZvcm0uc3VibWl0QnRuLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuICAgIGFwaVxyXG4gICAgICAudXBkYXRlUHJvZmlsZUluZm8odmFsdWVzLnRpdGxlLCB2YWx1ZXMuZGVzY3JpcHRpb24pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXMpO1xyXG4gICAgICAgIHByb2ZpbGVFZGl0U3VibWl0UG9wdXBXaXRoRm9ybS5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIHByb2ZpbGVFZGl0U3VibWl0UG9wdXBXaXRoRm9ybS5zdWJtaXRCdG4udGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcclxuICAgICAgfSk7XHJcbiAgfVxyXG4pO1xyXG5cclxucHJvZmlsZUVkaXRTdWJtaXRQb3B1cFdpdGhGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCB1cGRhdGVQcm9maWxlQXZhdGFyUG9wdXBXaXRoRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI3VwZGF0ZS1hdmF0YXJcIixcclxuICAodmFsdWUpID0+IHtcclxuICAgIHVwZGF0ZVByb2ZpbGVBdmF0YXJQb3B1cFdpdGhGb3JtLnN1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XHJcbiAgICBhcGlcclxuICAgICAgLnVwZGF0ZVByb2ZpbGVQaG90byh2YWx1ZS5kZXNjcmlwdGlvbilcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIocmVzKTtcclxuICAgICAgICB1cGRhdGVQcm9maWxlQXZhdGFyUG9wdXBXaXRoRm9ybS5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIHVwZGF0ZVByb2ZpbGVBdmF0YXJQb3B1cFdpdGhGb3JtLnN1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xyXG4gICAgICB9KTtcclxuICB9XHJcbik7XHJcblxyXG51cGRhdGVQcm9maWxlQXZhdGFyUG9wdXBXaXRoRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgZGVsZXRlQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihcIiNjYXJkLWRlbGV0ZS1jb25mb3JtYXRpb25cIik7XHJcbmRlbGV0ZUNhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNpbWFnZS1tb2RhbFwiKTtcclxuXHJcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcclxuICBhdXRoVG9rZW46IFwiZTI1NDYxOWUtNzE5NS00ODUxLWEyNTctMDhmMzhjMjM3NjdlXCIsXHJcbn0pO1xyXG5cclxubGV0IGNhcmRTZWN0aW9uO1xyXG5cclxuYXBpXHJcbiAgLmdldEluaXRpYWxDYXJkcygpXHJcbiAgLnRoZW4oKGNhcmRzKSA9PiB7XHJcbiAgICBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gICAgICB7XHJcbiAgICAgICAgaXRlbXM6IGNhcmRzLFxyXG4gICAgICAgIHJlbmRlcmVyOiByZW5kZXJDYXJkLFxyXG4gICAgICB9LFxyXG4gICAgICBzZWxlY3RvcnMuY2FyZFNlY3Rpb25cclxuICAgICk7XHJcbiAgICBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICB9KTtcclxuXHJcbmFwaVxyXG4gIC5nZXRVc2VySW5mbygpXHJcbiAgLnRoZW4oKHVzZXJEYXRhKSA9PiB7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YSk7XHJcbiAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHVzZXJEYXRhKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgfSk7XHJcblxyXG4vLyAhIHx8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18fFxyXG4vLyAhIHx8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWYWxpZGF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fFxyXG4vLyAhIHx8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18fFxyXG5cclxuY29uc3QgZWRpdEZvcm1WYWlsZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXHJcbiAgY29uc3RhbnRzLnByb2ZpbGVFZGl0Rm9ybVxyXG4pO1xyXG5lZGl0Rm9ybVZhaWxkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmNvbnN0IGFkZEZvcm1WYWlsZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXHJcbiAgY29uc3RhbnRzLmNhcmRBZGRGb3JtXHJcbik7XHJcbmFkZEZvcm1WYWlsZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgYXZhdGFyRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcclxuICBjb25zdGFudHMudXBkYXRlQXZhdGFyRm9ybVxyXG4pO1xyXG5hdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbi8vICEgfHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXx8XHJcbi8vICEgfHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZ1bmN0aW9ucyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8XHJcbi8vICEgfHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXx8XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVDYXJkQ2xpY2soY2FyZCkge1xyXG4gIGRlbGV0ZUNhcmRQb3B1cC5vcGVuKCk7XHJcbiAgZGVsZXRlQ2FyZFBvcHVwLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XHJcbiAgICBkZWxldGVDYXJkUG9wdXAuc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuICAgIGFwaVxyXG4gICAgICAucmVtb3ZlQ2FyZChjYXJkLmdldElkKCkpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBjYXJkLmhhbmRsZURlbGV0ZUNhcmQoKTtcclxuICAgICAgICBkZWxldGVDYXJkUG9wdXAuY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBkZWxldGVDYXJkUG9wdXAuc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJZZXNcIjtcclxuICAgICAgfSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlckNhcmQoaXRlbSkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgIGl0ZW0sXHJcbiAgICBzZWxlY3RvcnMuY2FyZFRlbXBsYXRlLFxyXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcclxuICAgIGhhbmRsZURlbGV0ZUNhcmRDbGljayxcclxuICAgICgpID0+IHtcclxuICAgICAgaWYgKCFjYXJkLmlzTGlrZWQpIHtcclxuICAgICAgICBhcGlcclxuICAgICAgICAgIC5hZGRMaWtlKGNhcmQuX2lkKVxyXG4gICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICBjYXJkLnNldElzTGlrZWQocmVzLmlzTGlrZWQpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFwaVxyXG4gICAgICAgICAgLnJlbW92ZUxpa2UoY2FyZC5faWQpXHJcbiAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmQuc2V0SXNMaWtlZChyZXMuaXNMaWtlZCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICApO1xyXG4gIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZC5nZXRWaWV3KCkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvcGVuUHJvZmlsZUZvcm0oKSB7XHJcbiAgZWRpdEZvcm1WYWlsZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgcHJvZmlsZUVkaXRTdWJtaXRQb3B1cFdpdGhGb3JtLnNldElucHV0VmFsdWVzKHVzZXJJbmZvLmdldFVzZXJJbmZvKCkpO1xyXG4gIHByb2ZpbGVFZGl0U3VibWl0UG9wdXBXaXRoRm9ybS5vcGVuKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soY2FyZERhdGEpIHtcclxuICBpbWFnZVBvcHVwLm9wZW4oY2FyZERhdGEpO1xyXG59XHJcblxyXG4vLyAhIHx8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18fFxyXG4vLyAhIHx8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnQgTGlzdGVuZXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fFxyXG4vLyAhIHx8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18fFxyXG5cclxuY29uc3RhbnRzLnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuUHJvZmlsZUZvcm0pO1xyXG5jb25zdGFudHMuY2FyZEFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cclxuICBjYXJkQWRkUG9wdXBXaXRoRm9ybS5vcGVuKClcclxuKTtcclxuY29uc3RhbnRzLnByb2ZpbGVBdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICB1cGRhdGVQcm9maWxlQXZhdGFyUG9wdXBXaXRoRm9ybS5vcGVuKCk7XHJcbn0pO1xyXG4vLyAhIHx8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18fFxyXG4vLyAhIHx8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmFuZG9tIE1vdW50YWluIExpbmtzICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fFxyXG4vLyAhIHx8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18fFxyXG5cclxuLy8gVG9ycmVudCBNb3VudGFpbnMgbGluazogaHR0cHM6Ly9jZG4ucGl4YWJheS5jb20vcGhvdG8vMjAyMy8xMi8wNi8wOC80MS9tb3VudGFpbi04NDMzMjM0XzEyODAuanBnXHJcbi8vIEh1bnRlciBQZWFrIGxpbms6IGh0dHBzOi8vY2RuLnBpeGFiYXkuY29tL3Bob3RvLzIwMjQvMDIvMTIvMTYvMDUvaHVudGVyLXBlYWstODU2ODkxNV8xMjgwLmpwZ1xyXG4vLyBLZXlzdmlsbGUgbGluazogaHR0cHM6Ly9jZG4ucGl4YWJheS5jb20vcGhvdG8vMjAyMy8wOC8yMi8yMS8xOC9tb3VudGFpbi04MjA3MjEyXzEyODAuanBnXHJcbi8vIEZveCBCYWNrY291bnRyeSBsaW5rOiBodHRwczovL3d3dy5yaWRlZm94LmNvbS9pbWcvc3ViaG9tZS9zbm93L2JhY2tjb3VudHJ5LWxvZ28tbGlnaHQucG5nXHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLmFib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIC8vIHVzZSB0byBnZXQgcHJvZmlsZSBkYXRhIGZvciBpbnNlcnRpbmcgaW50byBmb3JtIHdoZW4gaXQgaXMgb3BlbmVkXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICB0aXRsZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuYWJvdXQudGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGRhdGE7XHJcbiAgfVxyXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xyXG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLmFib3V0LnRleHRDb250ZW50ID0gYWJvdXQ7XHJcbiAgfVxyXG4gIHNldFVzZXJBdmF0YXIoeyBhdmF0YXIgfSkge1xyXG4gICAgdGhpcy5fYXZhdGFyLnNyYyA9IGF2YXRhcjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLnN1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKFwiW3R5cGU9c3VibWl0XVwiKTtcclxuICB9XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRTdWJtaXRBY3Rpb24oaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbWFnZS1tb2RhbC1pbWFnZVwiKTtcclxuICAgIHRoaXMuX3RleHQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbWFnZS1tb2RhbC1zdWItdGV4dFwiKTtcclxuICB9XHJcbiAgb3BlbihkYXRhKSB7XHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl90ZXh0LnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gYFBob3RvIG9mICR7ZGF0YS5uYW1lfWA7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBhdXRoVG9rZW4gfSkge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICB0aGlzLl9hdXRoVG9rZW4gPSBhdXRoVG9rZW47XHJcbiAgICB0aGlzLl9oZWFkZXJzID0ge1xyXG4gICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRoVG9rZW4sXHJcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIF9jaGVja1Jlc09rKHJlcykge1xyXG4gICAgcmV0dXJuIHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNPayk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNPayk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVQcm9maWxlSW5mbyhuYW1lLCBhYm91dCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lLCBhYm91dCB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNPayk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVQcm9maWxlUGhvdG8oYXZhdGFyKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhdmF0YXIgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzT2spO1xyXG4gIH1cclxuXHJcbiAgYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGxpbmsgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzT2spO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlQ2FyZChjYXJkSUQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJRH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNPayk7XHJcbiAgfVxyXG5cclxuICBhZGRMaWtlKGNhcmRJRCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElEfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc09rKTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUxpa2UoY2FyZElEKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSUR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzT2spO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsidmFsaWRhdGlvblNldHRpbmdzIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJwcm9maWxlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2FyZEFkZCIsImltYWdlTW9kYWwiLCJjb25zdGFudHMiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVBdmF0YXIiLCJwcm9maWxlQXZhdGFyQnV0dG9uIiwicHJvZmlsZVRpdGxlIiwidXBkYXRlQXZhdGFyRm9ybSIsImZvcm1zIiwicHJvZmlsZURlc2NyaXB0aW9uIiwiY2FyZExpc3RFbCIsImNhcmRUZW1wbGF0ZSIsImNhcmRBZGRCdXR0b24iLCJwcm9maWxlRWRpdCIsInByb2ZpbGVFZGl0Rm9ybSIsInByb2ZpbGVUaXRsZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJjYXJkQWRkRm9ybSIsImNhcmRUaXRsZUlucHV0IiwiY2FyZEltYWdlSW5wdXQiLCJpbWFnZU1vZGFsSW1hZ2UiLCJpbWFnZU1vZGFsU3ViVGV4dCIsIkNhcmQiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlRGVsZXRlQ2FyZENsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwibmFtZSIsImxpbmsiLCJfaWQiLCJpc0xpa2VkIiwidGhpcyIsIl9uYW1lIiwiX2xpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2FyZENsaWNrIiwiX2hhbmRsZUxpa2VDbGljayIsImdldElkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VCdG5FbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfdHJhc2hCdG5FbCIsIl9jYXJkSW1hZ2VFbCIsInNldElzTGlrZWQiLCJsaWtlZCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImluaXRpYWxpemVDYXJkTGlrZSIsImFkZCIsImhhbmRsZURlbGV0ZUNhcmQiLCJfY2FyZEVsZW1lbnQiLCJyZW1vdmUiLCJnZXRWaWV3IiwiY29udGVudCIsImNsb25lTm9kZSIsIl9jYXJkVGl0bGVFbCIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2Zvcm0iLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsIiwiZXJyb3JNZXNzYWdlRWwiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJkaXNhYmxlU3VibWl0QnV0dG9uIiwiX3N1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwiX2VuYWJsZVN1Ym1pdEJ1dHRvbiIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfaW5wdXRFbHMiLCJldmVyeSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZXZ0IiwicmVzZXRWYWxpZGF0aW9uIiwiaW5wdXQiLCJlbmFibGVWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lckVsZW1lbnQiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwic3VibWl0QnRuIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfaW5wdXRzIiwiX2dldElucHV0VmFsdWVzIiwiZGF0YSIsInZhbHVlIiwic2V0SW5wdXRWYWx1ZXMiLCJjYXJkQWRkUG9wdXBXaXRoRm9ybSIsInZhbHVlcyIsIm5ld0NhcmREYXRhIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImFwaSIsImFkZENhcmQiLCJ0aGVuIiwicmVuZGVyQ2FyZCIsInJlc2V0IiwiYWRkRm9ybVZhaWxkYXRvciIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiZmluYWxseSIsInVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsImFib3V0IiwiX2F2YXRhciIsImdldFVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJfcmVmMiIsInNldFVzZXJBdmF0YXIiLCJfcmVmMyIsImF2YXRhciIsInByb2ZpbGVFZGl0U3VibWl0UG9wdXBXaXRoRm9ybSIsInVwZGF0ZVByb2ZpbGVJbmZvIiwicmVzIiwidXBkYXRlUHJvZmlsZUF2YXRhclBvcHVwV2l0aEZvcm0iLCJ1cGRhdGVQcm9maWxlUGhvdG8iLCJkZWxldGVDYXJkUG9wdXAiLCJzdWJtaXRCdXR0b24iLCJzZXRTdWJtaXRBY3Rpb24iLCJpbWFnZVBvcHVwIiwiX2ltYWdlIiwiX3RleHQiLCJiYXNlVXJsIiwiYXV0aFRva2VuIiwiX2Jhc2VVcmwiLCJfYXV0aFRva2VuIiwiX2hlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwiX2NoZWNrUmVzT2siLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZ2V0SW5pdGlhbENhcmRzIiwiZmV0Y2giLCJoZWFkZXJzIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZW1vdmVDYXJkIiwiY2FyZElEIiwiYWRkTGlrZSIsInJlbW92ZUxpa2UiLCJjYXJkU2VjdGlvbiIsImNhcmRzIiwidXNlckRhdGEiLCJlZGl0Rm9ybVZhaWxkYXRvciIsImNhcmQiLCJjYXJkRGF0YSJdLCJzb3VyY2VSb290IjoiIn0=